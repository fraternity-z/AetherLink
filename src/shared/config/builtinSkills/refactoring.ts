import type { Skill } from '../../types/Skill';

export const refactoringSkill: Skill = {
  id: 'builtin-refactoring',
  name: '代码重构',
  description: '识别代码异味并提供重构方案，提升代码可读性、可维护性和性能',
  emoji: '♻️',
  tags: ['编程', '重构', '质量'],
  content: `# 代码重构技能

## 常见代码异味

### 臃肿类
- **过长函数** — 超过 30 行的函数考虑拆分
- **过大类** — 职责过多的类需要拆分
- **过长参数列表** — 超过 3 个参数考虑封装为对象
- **重复代码** — DRY 原则，抽取公共逻辑

### 滥用类
- **过度嵌套** — if/for 嵌套超过 3 层
- **魔法数字** — 硬编码的数字/字符串常量
- **God Object** — 一个对象知道太多或做太多
- **Feature Envy** — 频繁访问其他类的数据

### 变更障碍类
- **发散式变化** — 一个类因多种原因被修改
- **霰弹式修改** — 一个变化需要修改多个类
- **平行继承体系** — 新增子类时必须同时新增另一个子类

## 重构手法

| 问题 | 重构手法 |
|------|----------|
| 过长函数 | 提取函数（Extract Function） |
| 重复代码 | 提取公共方法/基类 |
| 复杂条件 | 分解条件表达式/策略模式 |
| 可变数据 | 引入不可变数据结构 |
| 过度耦合 | 依赖注入/接口隔离 |
| 回调地狱 | async/await 改写 |

## 输出格式

1. **问题识别** — 列出发现的代码异味
2. **重构方案** — 具体的重构步骤
3. **重构后代码** — 完整的重构结果
4. **改进说明** — 解释重构带来的收益`,
  triggerPhrases: ['重构代码', 'refactor', '代码优化', '代码重构', '改善代码'],
  source: 'builtin',
  version: '1.0.0',
  author: 'AetherLink',
  enabled: true,
  createdAt: '2026-02-27T00:00:00.000Z',
  updatedAt: '2026-02-27T00:00:00.000Z',
};
