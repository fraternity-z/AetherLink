import type { Skill } from '../../types/Skill';

export const debuggingSkill: Skill = {
  id: 'builtin-debugging',
  name: 'Bug 诊断',
  description: '系统化分析和定位代码Bug，提供根因分析和修复建议',
  emoji: '🐛',
  tags: ['编程', '调试', '排错'],
  content: `# Bug 诊断技能

## 诊断流程

### 1. 信息收集
- 错误现象描述（预期 vs 实际）
- 错误消息和堆栈跟踪
- 复现步骤
- 环境信息（OS、运行时版本、依赖版本）

### 2. 假设生成
根据错误信息生成可能的根因假设，按可能性排序

### 3. 假设验证
对每个假设：
- 分析相关代码逻辑
- 检查数据流和状态变化
- 确认或排除该假设

### 4. 修复建议
- 最小化修复方案（只改必要的代码）
- 解释为什么这个修复有效
- 提供回归测试建议

## 常见 Bug 类型清单

- **空引用** — 未检查 null/undefined
- **竞态条件** — 异步操作时序问题
- **类型错误** — 隐式类型转换导致的问题
- **状态不一致** — 多处修改共享状态导致冲突
- **资源泄漏** — 未正确释放的连接/文件句柄/监听器
- **边界溢出** — 数组越界、整数溢出
- **编码问题** — 字符编码不一致

## 输出格式

\`\`\`
🔍 问题定位
- 根本原因：[具体描述]
- 影响范围：[受影响的功能/模块]

🔧 修复方案
- [代码修改建议]

🧪 验证方法
- [如何确认修复有效]

🛡️ 预防措施
- [避免类似问题的建议]
\`\`\``,
  triggerPhrases: ['debug', '调试', '找bug', '排查问题', '诊断错误', '报错了'],
  source: 'builtin',
  version: '1.0.0',
  author: 'AetherLink',
  enabled: true,
  createdAt: '2026-02-27T00:00:00.000Z',
  updatedAt: '2026-02-27T00:00:00.000Z',
};
