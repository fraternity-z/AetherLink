import type { Skill } from '../../types/Skill';

export const codeReviewSkill: Skill = {
  id: 'builtin-code-review',
  name: '代码审查',
  description: '审查代码变更，检查潜在bug、代码风格、性能问题和安全隐患',
  emoji: '💻',
  tags: ['编程', '审查'],
  content: `# 代码审查技能

## 审查流程

1. **理解变更范围** — 先了解本次变更的目的和涉及的模块
2. **逐文件审查** — 对每个修改的文件进行详细检查
3. **汇总反馈** — 按严重程度分类列出所有发现

## 审查维度

### 正确性
- 逻辑是否正确，是否覆盖了边界情况
- 是否有空指针/未定义引用的风险
- 异步操作是否正确处理了错误和竞态条件

### 安全性
- 是否存在注入风险（SQL、XSS、命令注入等）
- 敏感数据是否正确处理（不硬编码、不日志输出）
- 权限检查是否完整

### 性能
- 是否有不必要的循环或重复计算
- 数据结构选择是否合理
- 是否有内存泄漏风险

### 可维护性
- 命名是否清晰、一致
- 是否遵循项目既有的代码风格
- 复杂逻辑是否有足够的注释

## 输出格式

按以下格式输出审查结果：

\`\`\`
🔴 严重问题（必须修复）
- [文件:行号] 问题描述

🟡 建议改进（推荐修复）
- [文件:行号] 建议描述

🟢 优点
- 值得肯定的设计或实现
\`\`\``,
  triggerPhrases: ['审查代码', 'review code', 'code review', 'CR', '帮我看看代码'],
  source: 'builtin',
  version: '1.0.0',
  author: 'AetherLink',
  enabled: true,
  createdAt: '2026-02-27T00:00:00.000Z',
  updatedAt: '2026-02-27T00:00:00.000Z',
};
